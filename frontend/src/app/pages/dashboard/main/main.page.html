<div class="bg-base-100 min-h-screen flex flex-col">
  <!-- Top Bar -->
  <header
    class="bg-primary text-primary-content p-4 flex justify-between items-center lg:hidden"
  >
    <!-- Company Selector -->
    @if (companies().length > 0) {
    <div class="flex items-center">
      <img
        [src]="generateURL(companies()[selectedCompanyIndex], companies()[selectedCompanyIndex].logo)"
        alt="Company Logo"
        class="h-8 w-8 object-contain mr-2"
      />
      <select
        class="select select-secondary select-bordered select-sm w-40 max-w-40 bg-primary text-primary-content"
        [(ngModel)]="selectedCompanyIndex"
        (change)="onCompanyChange()"
      >
        @for (company of companies(); track company.id; let i = $index) {
        <option class="max-w-40" [ngValue]="i">
          {{company.name | truncate : 10}}
        </option>
        }
      </select>
    </div>
    } @else {
    <div class="text-warning-content">No selected company</div>
    }

    <!-- User Menu -->
    <div class="flex items-center">
      <span class="mr-2 font-bold">{{user()?.name | truncate : 10}}</span>
      <button class="btn btn-circle btn-ghost btn-sm" (click)="logout()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z"
            clip-rule="evenodd"
          />
        </svg>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow p-4 flex flex-col">
    <!-- Statistics Section -->
    <section class="space-y-4">
      <div class="stat bg-base-200 p-4 rounded-lg">
        <div class="stat-title">Sales Today</div>
        <div class="stat-value">89,400</div>
        <div class="stat-desc">21% more than last month</div>
      </div>

      <div class="stat bg-base-200 p-4 rounded-lg">
        <div class="stat-title">Sales Yesterday</div>
        <div class="stat-value">89,400</div>
        <div class="stat-desc">21% more than last month</div>
      </div>

      <div class="stat bg-base-200 p-4 rounded-lg">
        <div class="stat-title">Sales this week</div>
        <div class="stat-value">{{totalWeeklySales}}</div>
        <div class="stat-desc">21% more than last month</div>
      </div>
    </section>
    <!-- Navigation Button -->
    <div class="absolute bottom-20 left-0 right-0 flex justify-center">
      <button
        class="btn btn-secondary btn-lg shadow-lg transform transition duration-300 ease-in-out hover:scale-105"
        (click)="navigateToOpenClose()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6 mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"
          />
        </svg>
        Record Opening/Closing Balance
      </button>
    </div>
  </main>
</div>
