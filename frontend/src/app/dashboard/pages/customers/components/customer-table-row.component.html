<!-- Customer Table Row (Desktop) -->
<tr class="hover border-b border-base-200">
  <!-- Customer Info -->
  <td class="py-4">
    <div class="flex items-center gap-3">
      <!-- Avatar -->
      <div class="avatar placeholder">
        <div class="bg-primary text-primary-content rounded-full w-10">
          <span class="text-xs font-semibold">{{ getInitials() }}</span>
        </div>
      </div>
      
      <!-- Name and Contact -->
      <div class="flex-1 min-w-0">
        <div class="font-semibold text-base truncate">{{ getFullName() }}</div>
        <div class="text-sm text-base-content/70 space-y-0.5">
          @if (customer.emailAddress) {
            <div class="truncate">{{ customer.emailAddress }}</div>
          }
          @if (customer.phoneNumber) {
            <div class="text-base-content/60 truncate">{{ customer.phoneNumber }}</div>
          }
        </div>
      </div>
    </div>
  </td>

  <!-- Verification Status -->
  <td class="py-4">
    @if (isVerified()) {
      <div class="badge badge-success badge-sm gap-1">
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
        </svg>
        Verified
      </div>
    } @else {
      <div class="badge badge-neutral badge-sm">Unverified</div>
    }
  </td>

  <!-- Credit Status -->
  <td class="py-4">
    @if (isCreditApproved()) {
      <div class="badge badge-success badge-sm">Approved</div>
    } @else {
      <div class="badge badge-warning badge-sm">Not Approved</div>
    }
  </td>

  <!-- Credit Limit -->
  <td class="text-right py-4">
    @if (getCreditLimit() > 0) {
      <div class="font-semibold text-sm">{{ formatCurrency(getCreditLimit()) }}</div>
    } @else {
      <span class="text-sm text-base-content/50">—</span>
    }
  </td>

  <!-- Outstanding Amount -->
  <td class="text-right py-4">
    @if (getOutstandingAmount() !== 0) {
      <div class="font-semibold text-sm" [class.text-warning]="getOutstandingAmount() < 0" [class.text-success]="getOutstandingAmount() > 0">
        {{ formatCurrency(getOutstandingAmountAbs()) }}
      </div>
      <div class="text-xs text-base-content/60 mt-0.5">
        {{ getOutstandingAmount() < 0 ? 'Owed' : 'Credit' }}
      </div>
    } @else {
      <span class="text-sm text-base-content/50">—</span>
    }
  </td>

  <!-- Available Credit -->
  <td class="text-right py-4">
    @if (isCreditApproved() && getCreditLimit() > 0) {
      <div class="font-bold text-sm" [class.text-success]="getAvailableCredit() > 0" [class.text-error]="getAvailableCredit() === 0">
        {{ formatCurrency(getAvailableCredit()) }}
      </div>
    } @else {
      <span class="text-sm text-base-content/50">—</span>
    }
  </td>

  <!-- Repayment Period -->
  <td class="text-center py-4">
    @if (getCreditDuration() > 0) {
      <div class="font-semibold text-sm">{{ getCreditDuration() }}</div>
      <div class="text-xs text-base-content/60 mt-0.5">days</div>
    } @else {
      <span class="text-sm text-base-content/50">—</span>
    }
  </td>

  <!-- Last Repayment -->
  <td class="py-4">
    @if (getLastRepaymentDate()) {
      <div class="text-xs font-medium">{{ formatDate(getLastRepaymentDate()) }}</div>
      @if (getLastRepaymentAmount() > 0) {
        <div class="text-xs text-base-content/60 mt-0.5">{{ formatCurrency(getLastRepaymentAmount()) }}</div>
      }
    } @else {
      <span class="text-sm text-base-content/50">—</span>
    }
  </td>

  <!-- Actions -->
  <td class="text-right py-4">
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-ghost btn-sm btn-square">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
        </svg>
      </div>
      <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 border border-base-300">
        <li>
          <button (click)="onAction('viewOrders')" class="flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            View Orders
          </button>
        </li>
        @if (isCreditApproved()) {
        <li>
          <button (click)="onAction('recordPayment')" class="flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            Record Payment
          </button>
        </li>
        }
        @if (!isWalkInCustomer()) {
        <li>
          <button (click)="onAction('edit')" class="flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
            Edit Customer
          </button>
        </li>
        } @else {
        <li>
          <button disabled class="flex items-center gap-2 opacity-50 cursor-not-allowed" title="Walk-in customers cannot be edited">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
            </svg>
            Edit (Locked)
          </button>
        </li>
        }
        <li>
          <button (click)="onAction('delete')" class="flex items-center gap-2 text-error">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
            Delete Customer
          </button>
        </li>
      </ul>
    </div>
  </td>
</tr>
