<div class="space-y-4">
  @for (type of accountTypes; track type) {
  @if (accountsByType()[type].length > 0) {
  <div class="collapse collapse-arrow bg-base-100 shadow">
    <input type="checkbox" checked />
    <div class="collapse-title text-xl font-medium">
      {{ getAccountTypeLabel()(type) }}
      <span class="badge badge-outline ml-2">
        {{ accountsByType()[type].length }} accounts
      </span>
      <span
        class="badge ml-2"
        [class.badge-success]="getAccountTypeTotal()(type) >= 0"
        [class.badge-error]="getAccountTypeTotal()(type) < 0"
      >
        {{ formatCurrency()(getAccountTypeTotal()(type)) }}
      </span>
    </div>
    <div class="collapse-content">
      <div class="overflow-x-auto">
        <table class="table table-zebra">
          <thead>
            <tr>
              <th>Code</th>
              <th>Name</th>
              <th>Balance</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (account of accountsByType()[type]; track account.id) {
            <tr
              [class.bg-primary/10]="selectedAccount()?.id === account.id"
              class="cursor-pointer hover:bg-base-200"
              (click)="onAccountClick(account)"
            >
              <td class="font-mono">{{ account.code }}</td>
              <td>{{ account.name }}</td>
              <td>
                <span
                  class="font-semibold"
                  [class.text-success]="account.balance >= 0"
                  [class.text-error]="account.balance < 0"
                >
                  {{ formatCurrency()(account.balance) }}
                </span>
              </td>
              <td>
                <button
                  class="btn btn-sm btn-ghost"
                  (click)="onViewTransactions(account, $event)"
                >
                  View Transactions
                </button>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
  }
  }
</div>

